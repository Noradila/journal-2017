\section{Introduction}

\IEEEPARstart{W}{ireless} sensor networks (WSNs) are widely used to gather data and measurement from the physical world in order to enable advanced monitoring and control of engineered or physical infrastructures \cite{wsnsurvey}. In the last few years, a concerted effort has begun to make WSNs "internet-enabled", in order to allow for advanced monitoring or reaction capabilities that cannot be achieved by local processing alone. Within this Internet-of-Things (IoT) paradigm,  it is increasingly important to have reliable and energy-efficient WSNs that could function for years, as sensors are often deployed in areas that are difficult to reach, such as volcanic monitoring \cite{volcano}, forest fire detection \cite{forestFire} and monitoring of dam structural integrity \cite{dam}.

However, sensors have limited energy resources as they are battery powered, and will not able to function once a certain threshold of energy level is reached. 
IoT-oriented WSNs also operate in unlicensed bands, such as the 16 channels of the 2.400-2.484 GHz band \cite{80215} or the 7 channels of the 5.850-5.925 GHz band \cite{80211}, where interference from the unreliable radio environment drains the sensors' batteries at a higher rate. These constraints have a major impact on the WSN's throughput and lifetime characteristics. In order to cope with these limitations, one should be able to adaptively  switch to reliable channels in order to reduce the effect of interference in the throughput and and energy drain of each sensor, and thereby maximise the overall network lifetime.
Many energy-efficient medium access control (MAC) or routing protocols have been proposed \cite{micmac, orchestra} \cite{winter2012rpl, ctp, leach}, with simulations showing promising results in advancing either throughput or energy autonomy, but very few joint MAC\ \&\ routing protocol in a single half-duplex radio interface \cite{chrysso, cmac, cognitiveSurvey} for throughput and lifetime maximisation have been experimentally tested in unlicensed bands yet. %\textcolor{red}{SEE\ NOTE\ 1 - not in single radio, half duplex, need explanation}.

Multichannel cross-layer routing protocol (MCRP) is a new protocol that considers all available channels in the unlicensed spectrum. The protocol is partly distributed: nodes work independently, but strategic decisions are made by a centralised controller known as the low power border router (LPBR), which is also the WSN aggregator that communicates with internet resources within an IoT-oriented deployment. MCRP increases throughput by using the channels that are found to have the lowest interference for communications.
Energy-based tree reconfiguration is then used to improve network lifetime.  We show that MCRP is able to achieve 80\%-90\% of the optimal (i.e., interference-free) throughput in real world experiments.
MCRP also improves the energy efficiency consuming three times less energy than a single channel protocol.  It allows reconfiguration of topologies to increase the network lifetime, as measured by time to first node failure.  In simulation experiments, the time to first node failure was increased by a factor of 8.3 in comparison to the no-reconfiguration case.

An initial version of MCRP was introduced in our related conference paper \cite{mcrp}, which presented some basic emulation results for loss rates on a small network and a comparison with the single channel routing protocol for low-power and lossy networks (RPL) \cite{winter2012rpl}.  This paper extends the MCRP protocol to improve recovery and to allow topology reconfiguration.  It presents more extensive emulation results as well as real world implementation on hardware with a ten node network and simulation results on a several hundred node network.  The results are compared with another multi-channel protocol, Orchestra \cite{orchestra}, which represents the state-of-the-art.

This paper is organised as follows. Section \ref{RelatedWork} presents  related work, Section \ref{MCRP} explains the multichannel cross-layer routing protocol, the improvements in comparison to a single and existing multichannel protocols and evaluates MCRP performance in emulation and real world environments.
Section \ref{OptimalTree} describes the proposed energy-based tree reconfiguration for WSNs in detail.  Section \ref{MCRPemulation} tests MCRP in emulation and Section \ref{MCRPhardware} tests it in hardware.
Section \ref{PerformanceEvaluation} evaluates the performance of the proposed optimisation. Finally, Section \ref{Conclusion} concludes this paper.
